/* Third-party */
// Rack Status Graph
// TODO: Replace this with something maintained and testable
@import "vendor/d3.relationshipgraph.min.css";
// Bulmaswatch Theme
// TODO: Import the theme files and remove the package
// TODO: Make theme configurable
@import "bulmaswatch/superhero/bulmaswatch.scss";

// Bulma Extension
@import "bulma-tooltip/dist/css/bulma-tooltip.sass";

/* Partials */
@import "partials/select-with-label";
@import "partials/spinner";
@import "partials/table";
@import "partials/toggle-switch";
@import "partials/transitions";

// Extend Bulma's panel-tabs class to wrap items
.panel-tabs {
	flex-wrap: wrap;
}

progress::-webkit-progress-value {
	-webkit-transition: width 1.5s ease;
	-moz-transition: width 1.5s ease;
	-o-transition: width 1.5s ease;
	transition: width 1s ease;
}

// overrides for d3.relationshipgraph.min.css
.relationshipGraph-block {
	stroke: none;
}

.panel-block.is-active {
	border-left-width: 4px;
	border-left-color: $primary;
}

.has-stroke-info {
	stroke: $info;
}

.has-stroke-success {
	stroke: $success;
}

.has-stroke-danger {
	stroke: $danger;
}

.navbar-dropdown ul > li {
	margin-left: 1em;
}

// move the first ul list back over
.navbar-dropdown ul:first-child {
	margin-left: -1em;
}

#device-editor-modal {
	input:focus:invalid + span.icon {
		background-color: $danger;

		i::before {
			content: "\f06a";
		}
	}

	input:focus:valid + span.icon {
		background-color: $success;

		i::before {
			content: "\f058";
		}
	}
}

.delete-token {
	&:hover {
		color: $red;
		cursor: pointer;
	}
}

// Modals
.modal-base {
	.modal-content {
		border-radius: 5px;
		width: 460px;

		.notification {
			padding: 1.5rem 1.5rem 1.25rem;

			.modal-icon {
				margin-bottom: 25px;
			}

			.title {
				margin-bottom: 20px;
			}

			.subtitle {
				padding: 10px;
				text-align: center;

				.name {
					color: $white;
				}

				&.margin-small {
					margin-bottom: 1rem;
				}
			}

			.field.has-switch {
				display: flex;
				align-items: center;
				justify-content: center;
				margin-bottom: 6px;

				.switch.is-large {
					margin-right: 8px;
				}

				.switch-text {
					width: 30px;
				}
			}
		}

		footer {
			.button {
				padding: 25px;

				i {
					margin-left: 10px;
				}
			}
		}
	}
}

.tokens {
	.header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 20px;

		.subtitle {
			margin-bottom: 0;
		}

		button {
			border-radius: 4px;
		}
	}

	.card-content {
		padding: 0;

		thead {
			th {
				background-color: $grey-darker;
				border-width: 0 0 1px 0;

				&:first-of-type {
					border-top-left-radius: 5px;
				}

				&:last-of-type {
					border-top-right-radius: 5px;
				}
			}
		}

		tfoot {
			th {
				background-color: $grey-darker;
				border-top-width: 1px;

				&:first-of-type {
					border-bottom-left-radius: 5px;
				}

				&:last-of-type {
					border-bottom-right-radius: 5px;
				}
			}
		}

		.token {
			background-color: darken($grey-darker, 4%);
			transition: background-color 0.3s ease-in-out;

			&.create {
				input {
					background-color: $grey-dark;
					color: $grey-lighter;

					&::placeholder {
						color: $grey-lighter;
					}
				}

				td {
					.button {
						border-top-right-radius: 4px;
						border-bottom-right-radius: 4px;
					}
				}
			}

			.has-success-background {
				background-color: $green;
				transition: background-color 0.3s ease-in-out;
			}

			td {
				padding: 14px;
				white-space: nowrap;

				&:last-of-type {
					text-align: right;
				}

				&:first-of-type {
					width: 22px;
				}
			}
		}
	}
}

.session-notification {
	.message-header {
		padding: 0.6em 0.5em 0.6em 1.5em;
	}

	.message-body {
		padding: 0.5em 1.5em;
	}
}

.conch-versions {
	padding: 10px;

	.tags-container {
		display: flex;
		flex-direction: column;
		margin: 0 auto;

		.tags {
			display: inline-block;
			margin-bottom: 0;

			.tag {
				margin-bottom: 0;
			}

			&:first-of-type {
				margin-bottom: 5px;
			}
		}
	}
}

.update-phase-modal {
	.selected-phase {
		select {
			background-color: #1f2d3b;
			border-color: #4E5D6C;
			color: #bdcbdb;

			&:hover {
				color: $white;
			}
		}
	}

	.current-phase {
		background-color: $grey-darker;
		border: 1px solid $grey;
		color: #bdcbdb;
		border-radius: 4px;
		padding: 5px;
		width: 175px;
		margin: 0 auto;
	}

	.column {
		&:first-of-type {
			text-align: center;
			align-items: center;
			padding: 12px 0;
			margin-right: 20px;
		}

		&:last-of-type {
			text-align: center;
			align-items: center;
			padding: 12px 0;
			margin-left: 20px;
		}
	}
}

.divider {
    margin: 1rem 0;
    line-height: 1;
	height: 0;
	font-size: 1rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .05em;
    color: rgba(0,0,0,.85);
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
	-webkit-tap-highlight-color: transparent;

	i {
		position: absolute;
		left: -5px;
		top: -7px;
	}

	&.is-vertical {
		position: absolute;
		z-index: 2;
		top: 50%;
		left: 50%;
		margin: 0;
		padding: 0;
		width: auto;
		height: 50%;
		line-height: 0;
		text-align: center;
		-webkit-transform: translateX(-50%);
		transform: translateX(-50%);

		&::after {
			top: auto;
			bottom: 0;
		}

		&::before {
			top: -100%;
		}

		&::before,
		&::after {
			position: absolute;
			left: 50%;
			content: '';
			z-index: 3;
			border-left: 1px solid rgba(34,36,38,.15);
			border-right: 1px solid rgba(255,255,255,.1);
			width: 0%;
			height: calc(100% - 1rem);
		}
	}
}

.page-not-found {
	hr {
		max-width: 474px;
	}

	.content {
		margin-top: 260px;
	}

	.title {
		font-size: 6rem;
	}

	.subtitle {
		margin-bottom: 30px;
	}

	.action {
		.text {
			margin: 25px 0;

			p:first-child() {
				margin-bottom: 0.25em;
			}
		}
	}

	.image {
		margin-top: 160px;
	}
}

.user-profile {
	section.content {
		margin-top: 0.75rem;

		.message-header {
			i {
				margin-right: 10px;
			}

			p {
				margin-bottom: 0;
			}
		}

		.button.save {
			margin-top: 0.75rem;
		}
	}

	.modal-card-body {
		padding: 0px;

		.message-body {
			p {
				margin-bottom: 20px;
			}
		}
	}
}

.users-table {
	tfoot {
		border-bottom-width: 1px;
		border-bottom-color: $grey;
		border-bottom-style: solid;
	}
}

.user-management {
	select {
		background-color: $grey-darker;
		border-color: $grey;
		color: #bdcbdb;
	}

	.card-header-title {
		padding-bottom: 20px;
		padding-top: 20px;
	}

	.users-stats {
		transition: all 0.2s ease-in-out;

		&:hover {
			background-color: lighten($grey-dark, 2%);
			box-shadow: 0px 9px 45px -19px rgba(0,0,0,1);
			transition: all 0.2s ease-in-out;
		}
	}

	.tabs {
		margin-bottom: 0;

		li {
			a.tab {
				color: $grey-lighter;
			}

			&.is-active {
				margin: 0;

				a {
					border-bottom-width: 2px;
					border-bottom-color: #209cee;
					color: #209cee;
					font-weight: 600;
				}
			}

			&:not(.is-active) {
				a {
					border-bottom-width: 0;
					margin-bottom: 1px;
				}
			}
		}
	}

	.user-modal {
		input {
			background-color: $grey-darker;
			border-color: $grey;
			color: #bdcbdb;

			&::placeholder {
				color: #bdcbdb;
			}
		}
	}

	.no-results {
		text-align: center;

		p.title {
			margin-top: 40px;
		}

		img {
			margin-top: 20px;
		}
	}

	.modal-content {
		border-radius: 5px;
	}

	.dropdown {
		.dropdown-content {
			background-color: lighten($grey-dark, 8%);
			border-radius: 5px;
		}

		.dropdown-item {
			padding: 6px 16px;

			&:hover {
				color: $white;
			}
		}

		hr.dropdown-divider {
			background-color: $grey-light;
		}
	}

	.workspace-view {
		.workspaces-table {
			th {
				padding: 15px 20px;
			}

			.row.users-subtable {
				background-color: lighten($grey-darker, 3%);

				table {
					border-top-left-radius: 5px;
					border-top-right-radius: 5px;

					td {
						border-width: 0 0 1px;

						&:hover {
							cursor: default;
						}
					}
				}

				thead th {
					border-top-width: 0;
					border-bottom-width: 1px;
				}
			}
		}

		.workspace-row {
			&:hover {
				cursor: pointer;
			}
		}

		.row {
			td {
				padding: 20px;
			}

			&:hover {
				cursor: pointer;
			}

			i.fa-chevron-right {
				transition: transform 0.2s ease-in-out;
			}

			&.is-selected {
				transition: background-color 0.2s ease-in-out;

				i.fa-chevron-right {
					transform: rotate(90deg);
					transition: transform 0.2s ease-in-out;
				}
			}
		}
	}
}

a.button {
	border-radius: 4px;

	&.is-fullwidth {
		border-radius: inherit;
	}
}

button.button {
	&:not(.delete) {
		border-radius: 4px;
	}
}

input.input.search,
.select select {
	border-radius: 4px;
}

.authentication-tokens {
	section.content {
		margin-top: 0.75rem;
	}

	li:not(:last-of-type) {
		margin-bottom: 5px;
	}

	select {
		background-color: $grey-darker;
		border-color: $grey;
		color: #bdcbdb;
	}

	.auth-users-table {
		th {
			padding-left: 20px;
			padding-right: 20px;
		}

		td {
			padding: 20px;

			&:last-of-type {
				text-align: right;
			}

			button {
				&:first-of-type {
					margin-right: 5px;
				}
			}
		}

		tr {
			&.is-selected {
				background-color: lighten($grey-darker, 2%);
				border: 1px solid #209cee;
				border-width: 0 0 0 1px;
			}
		}
	}

	.toggle-switches {
		display: flex;
		justify-content: space-around;
	}

	.selected-user {
		&.box {
			border-color: #209cee;
			border-radius: 4px;
			border-width: 0 4px 0 4px;
			border-style: solid;
		}

		.tags {
			margin-bottom: 0;
			margin-right: 10px;

			.tag {
				margin-bottom: 0;
			}
		}
	}

	.no-results {
		text-align: center;

		p.title {
			margin-top: 40px;
		}

		img {
			margin-top: 20px;
		}
	}

	.user-search {
		input {
			background-color: $grey-darker;
			border-color: $grey;
			color: #bdcbdb;

			&::placeholder {
				color: #bdcbdb;
			}
		}
	}

	.user-authentication-tokens {
		.username {
			flex-grow: 1;
			margin-bottom: 0;
		}
	}

	.user-search-row {
		cursor: pointer;

		td {
			border: none;
			padding: 15px 10px;
		}

		&:hover {
			background-color: $grey-darker;
		}
	}
}
